
@BEGINEVENTS
;@DEBUG
@INITFLAG

;GENERAL

@IF
NoSchism
defender=Anybody
@ENDIF

@IF
Negotiation
talker=anybody
talkertype=humanorcomputer
listener=anybody
listenertype=humanorcomputer

@IF
TURN
turn=-1
@THEN
MAKEAGGRESSION
who=Mordor
whom=Gondor
@ENDIF

@IF
TURN
turn=-1
@THEN
MAKEAGGRESSION
who=Mordor
whom=Elves
@ENDIF

@IF
TURN
turn=-1
@THEN
MAKEAGGRESSION
who=Mordor
whom=Free People
@ENDIF

@IF
TURN
turn=-1
@THEN
MAKEAGGRESSION
who=Swarthy men
whom=Free People
@ENDIF

@IF
TURN
turn=-1
@THEN
MAKEAGGRESSION
who=Chaos
whom=Free People
@ENDIF

@IF
TURN
turn=-1
@THEN
MAKEAGGRESSION
who=Swarthy men
whom=Gondor
@ENDIF

@IF
TURN
turn=-1
@THEN
MAKEAGGRESSION
who=Chaos
whom=Gondor
@ENDIF

@IF
TURN
turn=-1
@THEN
MOVEUNIT
unit=Frodo and Sam
owner=Free People
maprect
56,46,60,46,60,50,56,50
moveto
81,47
numbertomove=1
@ENDIF

@IF
TURN
turn=1
@THEN
TEXT
^^LORD OF THE RINGS
^ 
^^Playable only by Swarthy Men
^  
ENDTEXT
@ENDIF

@IF
TURN
turn=1
@THEN
TEXT
Bilbo and his nephew Frodo are celebrating their birthday in the quiet village of Shire.   
ENDTEXT
PLAYWAVEFILE
BEGIN.WAV
@ENDIF

@IF
TURN
turn=2
@THEN
TEXT
Aragorn arrives at the village of Bree.  
ENDTEXT
CREATEUNIT
unit=Aragorn
owner=Free People
veteran=yes
homecity=NONE
locations
67,51
69,53
70,48
81,47
endlocations
@ENDIF

@IF
TURN
turn=3
@THEN
TEXT
Sauron's Dark Riders have been seen lurking near the Shire. 
ENDTEXT
CREATEUNIT
unit=Dark Rider
count=8
owner=Mordor
veteran=yes
homecity=Barad-dur
randomize
locations
60,46
71,47
76,46
79,53
73,59
101,53
97,71
endlocations
@ENDIF

@IF
TURN
turn=5
@THEN
GIVETECHNOLOGY
receiver=Free People
technology=41
@ENDIF

@IF
TURN
turn=10
@THEN
GIVETECHNOLOGY
receiver=Chaos
technology=68
@ENDIF

@IF
TURN
turn=6
@THEN
TEXT
The powerful wizard Gandalf has arrived at Rivendell.  
ENDTEXT
CREATEUNIT
unit=Gandalf the Grey
owner=Free People
veteran=yes
homecity=NONE
locations
81,47
74,48
81,53
73,59
endlocations
@ENDIF

@IF
TURN
turn=9
@THEN
TEXT
Sauron's spies report that the One Ring has been taken out of Rivendell by some ragtag band of adventurers including a Baggins and led by wizard Gandalf. Looks like all elves, dwarves, humans and even halflings have sent their representatives into that Fellowship. The Dark Lord does not know not what they are planning to do with the Ring, but he wants us to help catch them before they end up losing it into some river again...
ENDTEXT
CREATEUNIT
unit=Gimli
owner=Free People
veteran=yes
homecity=NONE
locations
81,47
82,44
80,52
92,40
endlocations
@ENDIF

@IF
TURN
turn=9
@THEN
CREATEUNIT
unit=Legolas
owner=Free People
veteran=yes
homecity=NONE
locations
81,47
79,45
79,53
98,36
endlocations
@ENDIF

@IF
TURN
turn=9
@THEN
CREATEUNIT
unit=Boromir
owner=Free People
veteran=yes
homecity=NONE
locations
81,47
78,54
77,63
82,104
endlocations
@ENDIF

@IF
TURN
turn=11
@THEN
CREATEUNIT
unit=Frodo and Sam
owner=Free People
veteran=yes
homecity=NONE
locations
81,47
58,48
76,66
endlocations
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=7
state=on
@THEN
delay
delay=1
TEXT
Eowyn of Rohan dressed as man secretly rides into battle alongside the Knights of Gondor. 
ENDTEXT
CREATEUNIT
unit=Eowyn
owner=Gondor
veteran=yes
homecity=NONE
locations
82,104
88,112
95,119
78,112
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=6
state=on
@THEN
delay
delay=2
TEXT
An old horror emerges from the black castle of Minas Morgul.
ENDTEXT
CREATEUNIT
unit=Witch King
owner=Mordor
veteran=yes
homecity=Barad-dur
locations
102,118
112,110
endlocations
JUSTONCE
@ENDIF

;FREE PEOPLE

@IF
UNITKILLED
unit=King
attacker=anybody
defender=Gondor
@THEN
TEXT
King Aragorn Elessar has once again been mortally wounded in battle. He is brought to Arnor for healing. 
ENDTEXT
CREATEUNIT
unit=King
owner=Free People
veteran=no
homecity=NONE
locations
81,47
67,51
51,61
85,79
endlocations
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=King
attacker=anybody
defender=Free People
@THEN
TEXT
King Aragorn Elessar is finally dead and his head cut off his shoulders! No more tricks and miraculous recoveries... unless that head finds its way off the spike and attach itself to the rotten body... 
ENDTEXT
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=2
state=on
@THEN
GIVETECHNOLOGY
receiver=Free People
technology=46
CHANGEMONEY
receiver=Free People
amount=6000
MAKEAGGRESSION
who=Isengard
whom=Mordor
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=2
state=on
@THEN
GIVETECHNOLOGY
receiver=Free People
technology=66
MAKEAGGRESSION
who=Swarthy men
whom=Mordor
JUSTONCE
@ENDIF

;MORDOR

@IF
UNITKILLED
unit=Frodo and Sam
attacker=Mordor
defender=anybody
@THEN
FLAG
continuous
flag=1
Who=Mordor
state=on
TEXT
Frodo the Ringbearer has been killed and Sauron's minions have retrieved the One Ring! The Dark Lord will now become more powerful than any of Middle'Earth's greatest heroes! 
ENDTEXT
CREATEUNIT
unit=Witch King
owner=Mordor
veteran=yes
homecity=Barad-dur
locations
112,110
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=1
state=on
@THEN
delay
delay=3
TEXT
Sauron has unleashed the power of the One Ring! A new host of evil beasts is marching out of the Dark Land. 
ENDTEXT
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=1
state=on
@THEN
delay
delay=12
FLAG
flag=11
Who=Mordor
state=on
GIVETECHNOLOGY
receiver=Mordor
technology=90
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=0
state=on
@THEN
FLAG
continuous
flag=10
Who=Mordor
state=on
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=1
state=on
@THEN
delay
delay=10
CREATEUNIT
unit=Dark Rider
count=3
owner=Mordor
veteran=yes
homecity=Barad-dur
Randomize
locations
112,110
102,118
105,99
97,71
70,30
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=11
state=on
@AND
CHECKFLAG
Who=Mordor
flag=0
state=off
@THEN
FLAG
continuous
flag=0
Who=Mordor
state=on
TEXT
Sauron himself is leading his troops out of Mordor. Behold his might and despair!
ENDTEXT
CREATEUNIT
unit=Sauron
owner=Mordor
veteran=no
homecity=Barad-dur
locations
112,110
119,89
endlocations
@ENDIF

@IF
CITYTAKEN
city=Barad-dur
attacker=anybody
defender=Mordor
@THEN
FLAG
continuous
flag=2
Who=Mordor
state=on
TEXT
A horrible disaster has struck our allies! The great Lord Sauron, the most powerful being on Middle-Earth, has been killed! Without his magic to sustain Barad-dur, the fortress crumbles to the ground. Without anyone to lead their armies and keep the discipline up, their forces scatter and flee in panic. Mordor is now at its weakest, for better or worse...
ENDTEXT
CREATEUNIT
unit=Great Eagle
owner=Free People
veteran=yes
homecity=none
locations
108,112
109,113
endlocations
JUSTONCE
GIVETECHNOLOGY
receiver=Mordor
technology=99
PLAYWAVEFILE
MOOTDOOM.WAV
@ENDIF

@IF
CITYTAKEN
city=Barad-dur
attacker=anybody
defender=Mordor
@THEN
delay
delay=10
TEXT
Some members of that cursed Fellowship are planning to leave Middle-Earth on Cirdan's White Ships. This will be a challenge for our Corsairs!
ENDTEXT
CREATEUNIT
unit=White Ship
owner=Free People
veteran=yes
homecity=none
locations
47,49
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Barad-dur
attacker=anybody
defender=Mordor
@THEN
delay
delay=10
CREATEUNIT
unit=White Ship
owner=Gondor
veteran=yes
homecity=none
locations
48,46
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Barad-dur
attacker=anybody
defender=Mordor
@THEN
delay
delay=10
CREATEUNIT
unit=White Ship
owner=Elves
veteran=yes
homecity=none
locations
44,48
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=0
state=on
@THEN
MAKEAGGRESSION
who=Mordor
whom=Isengard
@ENDIF

@IF
RECEIVEDTECHNOLOGY
technology=99
receiver=Mordor
@THEN
CHANGEMONEY
receiver=Mordor
amount=-1000
@ENDIF

;CHAOS

@IF
UNITKILLED
unit=Frodo and Sam
attacker=Chaos
defender=anybody
@THEN
TEXT
Morgoth's slaves have slain Baggins and a greedy dragon has captured the One Ring! Knowing well the true nature of Sauron's former allies it would be foolish to presume that he would hand it back to whom it belongs to... at least not without a fight. We have a chance to retrieve the One Ring for ourselves if we can slay the mighty dragon Ancalagon II.
ENDTEXT
FLAG
continuous
flag=4
Who=Chaos
state=on
@ENDIF

@IF
CHECKFLAG
Who=Chaos
flag=4
state=on
@THEN
FLAG
continuous
flag=0
Who=Chaos
state=on
CREATEUNIT
unit=Ancalagon II
owner=Chaos
veteran=yes
homecity=NONE
locations
84,22
84,18
92,8
endlocations
CHANGEMONEY
receiver=Chaos
amount=4000
GIVETECHNOLOGY
receiver=Chaos
technology=90
@ENDIF

@IF
CHECKFLAG
Who=Chaos
flag=4
state=on
@THEN
FLAG
continuous
flag=4
Who=Chaos
state=off
@ENDIF

@IF
UNITKILLED
unit=Dragon
attacker=anybody
defender=Chaos
@THEN
delay
delay=60
TEXT
A colossal red dragon has been seen flying around in the North, terrorizing the smallfolk. We should kill him, loot his lair and convince the smallfolk to give us all their gold for saving their precious children and sheep from that terrible monster!
ENDTEXT
FLAG
continuous
flag=5
Who=Chaos
state=on
@ENDIF

@IF
CHECKFLAG
Who=Chaos
flag=5
state=on
@AND
CHECKFLAG
Who=Chaos
flag=0
state=off
@THEN
FLAG
continuous
flag=0
Who=Chaos
state=on
CREATEUNIT
unit=Ancalagon II
owner=Chaos
veteran=no
homecity=NONE
locations
92,16,0
75,9,0
108,16,0
99,19,1
132,22,3
endlocations
JUSTONCE
@ENDIF

;ELVES

@IF
UNITKILLED
unit=Frodo and Sam
attacker=Elves
defender=anybody
@THEN
TEXT
The hideous elves have given in to the temptation of the One Ring! Galadriel's assassins have slain Frodo and the White Lady has become the Dark Queen. Now we need to kill her to get the One Ring for ourselves! At least we have no code of honour and killing a woman is that much easier...
ENDTEXT
FLAG
continuous
flag=9
Who=Elves
state=on
@ENDIF

@IF
CHECKFLAG
Who=Elves
flag=9
state=on
@THEN
FLAG
continuous
flag=0
Who=Elves
state=on
CREATEUNIT
unit=Dark Queen
owner=Elves
veteran=yes
homecity=NONE
locations
86,74
48,44
99,45
endlocations
GIVETECHNOLOGY
receiver=Elves
technology=65
MAKEAGGRESSION
who=Elves
whom=Gondor
@ENDIF

@IF
CHECKFLAG
Who=Elves
flag=9
state=on
@THEN
FLAG
continuous
flag=9
Who=Elves
state=off
MAKEAGGRESSION
who=Elves
whom=Gondor
@ENDIF

@IF
UNITKILLED
unit=Wizard
attacker=anybody
defender=Elves
@THEN
FLAG
continuous
flag=5
Who=Elves
state=on
@ENDIF

@IF
TURN
turn=110
@THEN
GIVETECHNOLOGY
receiver=Elves
technology=65
@ENDIF

@IF
CHECKFLAG
Who=Elves
flag=5
state=on
@AND
RECEIVEDTECHNOLOGY
technology=65
receiver=Elves
@THEN
TEXT
Melian maia has returned to Middle-Earth because of her old friendship with Lady Galadriel, and is going to fight for the Elves!
ENDTEXT
CREATEUNIT
unit=Dark Queen
owner=Elves
veteran=no
homecity=NONE
locations
86,74
48,44
99,45
95,61
endlocations
JUSTONCE
@ENDIF

;SWARTHY MEN

@IF
UNITKILLED
unit=Frodo and Sam
attacker=Swarthy men
defender=anybody
@THEN
FLAG
continuous
flag=5
Who=Swarthy men
state=on
TEXT
Rejoice and celebrate! We have killed Frodo Baggins and the One Ring is ours! Under the banner of the victorious commander and as well the new King of Harad and Rhun, we shall march forth and conquer all Middle-Earth! We must be aware of Sauron, though. He may not like the decision of our new ruler to keep the ring...
ENDTEXT
CHANGEMONEY
receiver=Swarthy men
amount=8000
@ENDIF

@IF
CHECKFLAG
Who=Swarthy men
flag=5
state=on
@THEN
FLAG
continuous
flag=0
Who=Swarthy men
state=on
CREATEUNIT
unit=King
owner=Swarthy men
veteran=yes
homecity=NONE
locations
121,77
88,172
118,82
endlocations
GIVETECHNOLOGY
receiver=Swarthy men
technology=58
MAKEAGGRESSION
who=Swarthy men
whom=Mordor
@ENDIF

@IF
CHECKFLAG
Who=Swarthy men
flag=5
state=on
@THEN
FLAG
continuous
flag=5
Who=Swarthy men
state=off
MAKEAGGRESSION
who=Swarthy men
whom=Isengard
@ENDIF

;GONDOR 

@IF
UNITKILLED
unit=Frodo and Sam
attacker=Gondor
defender=anybody
@THEN
FLAG
continuous
flag=6
Who=Gondor
state=on
TEXT
Gondorians have somehow managed to kill Baggins and loot the One Ring! The Ruling Steward who claimed it intends to use it against Sauron and us.
ENDTEXT
CHANGEMONEY
receiver=Gondor
amount=-2000
@ENDIF

@IF
CHECKFLAG
Who=Gondor
flag=6
state=on
@THEN
FLAG
continuous
flag=0
Who=Gondor
state=on
TEXT
Denethor II has fallen under the influence of the One Ring! No longer caring for his noble goals to defend the land and people, the only thing he wants now is power. He crowns himself the King of Gondor and sends out armies to command and conquer all who refuse to swear him fealty! We would do Gondor a great fcavour if we kill the evil usurper and relieve him of his burden.
ENDTEXT
CREATEUNIT
unit=King
owner=Gondor
veteran=yes
homecity=NONE
locations
95,119
80,130
82,104
72,118
endlocations
GIVETECHNOLOGY
receiver=Gondor
technology=66
MAKEAGGRESSION
who=Gondor
whom=Free People
@ENDIF

@IF
CHECKFLAG
Who=Gondor
flag=6
state=on
@THEN
FLAG
continuous
flag=6
Who=Gondor
state=off
MAKEAGGRESSION
who=Gondor
whom=Elves
@ENDIF

@IF
CHECKFLAG
Who=Gondor
flag=0
state=off
@AND
UNITKILLED
unit=Aragorn
attacker=anybody
defender=Gondor
@THEN
delay
delay=3
TEXT
Aragorn has recovered from his wounds and reveals himself as the true King of Gondor! 
ENDTEXT
CREATEUNIT
unit=King
owner=Gondor
veteran=no
homecity=NONE
locations
95,119
80,130
75,115
64,120
71,121
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=2
state=on
@AND
CHECKFLAG
Who=Gondor
flag=0
state=off
@THEN
TEXT
The last sapling of the White Tree has been found from Mount Mindolluin!
ENDTEXT
BestowImprovement
improvement=67
race=Gondor
capital=yes
wonders=yes
JUSTONCE
GIVETECHNOLOGY
receiver=Gondor
technology=66
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=2
state=on
@AND
CHECKFLAG
Who=Gondor
flag=0
state=off
@THEN
GIVETECHNOLOGY
receiver=Gondor
technology=46
CHANGEMONEY
receiver=Gondor
amount=6000
JUSTONCE
@ENDIF

;SARUMAN 

@IF
CHECKFLAG
Who=Isengard
flag=0
state=off
@AND
UNITKILLED
unit=Frodo and Sam
attacker=Isengard
defender=anybody
@THEN
FLAG
continuous
flag=5
Who=Isengard
state=on
@ENDIF

@IF
CHECKFLAG
Who=Isengard
flag=5
state=on
@THEN
FLAG
continuous
flag=0
Who=Isengard
state=on
CREATEUNIT
unit=Curunir
owner=Isengard
veteran=yes
homecity=none
locations
76,92
65,83
endlocations
GIVETECHNOLOGY
receiver=Isengard
technology=90
MAKEAGGRESSION
who=Isengard
whom=Mordor
@ENDIF

@IF
CHECKFLAG
Who=Isengard
flag=5
state=on
@THEN
CREATEUNIT
unit=Witch King
owner=Isengard
veteran=yes
homecity=none
locations
76,92
endlocations
CHANGEMONEY
receiver=Mordor
amount=4000
@ENDIF

@IF
CHECKFLAG
Who=Isengard
flag=5
state=on
@THEN
FLAG
continuous
flag=5
Who=Isengard
state=off
GIVETECHNOLOGY
receiver=Isengard
technology=77
MAKEAGGRESSION
who=Swarthy men
whom=Isengard
@ENDIF

@IF
UNITKILLED
unit=Warlord
attacker=anybody
defender=Isengard
@THEN
GIVETECHNOLOGY
receiver=Isengard
technology=77
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Warlord
attacker=anybody
defender=Isengard
@THEN
delay
delay=20
FLAG
continuous
flag=1
Who=Isengard
state=on
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Isengard
flag=1
state=on
@AND
CHECKFLAG
Who=Isengard
flag=0
state=off
@THEN
FLAG
continuous
flag=0
Who=Isengard
state=on
TEXT
Saruman has astonished all who have thought him lost by reappearing in Isengard and holding the One Ring! Death to the traitor!
ENDTEXT
CREATEUNIT
unit=Curunir
owner=Isengard
veteran=no
homecity=NONE
locations
76,92
74,78
63,99
endlocations
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Frodo and Sam
attacker=anybody
defender=Free People
@THEN
FLAG
continuous
flag=7
Who=Free People
state=on
GIVETECHNOLOGY
receiver=TriggerAttacker
technology=15
@ENDIF

@IF
UNITKILLED
unit=Sauron
attacker=anybody
defender=Mordor
@THEN
FLAG
continuous
flag=0
Who=Mordor
state=off
GIVETECHNOLOGY
receiver=TriggerAttacker
technology=15
@ENDIF

@IF
UNITKILLED
unit=Sauron
attacker=anybody
defender=Mordor
@THEN
TakeTechnology
whom=Mordor
technology=15
@ENDIF

; CITYTAKEN

@IF
CITYTAKEN
city=Moria
attacker=anybody
defender=Mordor
@THEN
TEXT
The mines of Moria have been disturbed and an ancient horror within been awakened! Even orcs flee in terror at the sight of the balrog and its burning whips of fire!
ENDTEXT
CREATEUNIT
unit=Balrog
owner=Mordor
veteran=no
homecity=none
locations
82,74,1
81,73,1
83,73,1
80,76,1
endlocations
CHANGEMONEY
receiver=TriggerAttacker
amount=3000
JUSTONCE
PLAYWAVEFILE
BALROG.WAV
@ENDIF

@IF
CITYTAKEN
city=Lorien
attacker=anybody
defender=Elves
@THEN
FLAG
continuous
flag=10
Who=Mordor
state=on
TEXT
The beautiful Lorien has fallen! Even the combined might of Galadriel and Celeborn was not enough to save the Golden Wood.
ENDTEXT
@ENDIF

@IF
CITYTAKEN
city=Lorien
attacker=anybody
defender=Elves
@THEN
FLAG
continuous
flag=6
Who=Elves
state=on
@ENDIF

@IF
CITYTAKEN
city=Lorien
attacker=Elves
defender=anybody
@THEN
FLAG
continuous
flag=6
Who=Elves
state=off
TEXT
The Elves liberate Golden Wood! They put great effort in replanting their mallorn-trees, but it will still take centuries to restore Lorien to its former glory.
ENDTEXT
@ENDIF

@IF
CityDestroyed
city=Osgiliath
owner=anybody
@THEN
TEXT
Osgiliath, the former prosperous capital of Gondor is sacked, looted and burnt down to ruins!
ENDTEXT
CREATEUNIT
unit=Olog-Hai
owner=Mordor
veteran=yes
homecity=NONE
locations
102,118
112,110
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Minas Morgul
attacker=anybody
defender=Mordor
@THEN
TEXT
The impenetrable Minas Morgul has fallen! Sauron is outraged and sends his Ringwraiths to reclaim it at once!
ENDTEXT
CREATEUNIT
unit=Nazgul
owner=Mordor
veteran=no
homecity=Barad-dur
locations
112,110
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Lorien
attacker=anybody
defender=Elves
@THEN
TEXT
The Ents of Fangorn march forth to join the Elves in fight.
ENDTEXT
CREATEUNIT
unit=Ents
count=8
owner=Elves
veteran=yes
homecity=NONE
Randomize
locations
84,80
85,81
83,81
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=White Hills
attacker=anybody
defender=Elves
@THEN
TEXT
The Elves no longer control the White Hills! Dwellers of the eastern lands have been cut off from the Grey Havens and Cirdan sends rangers out of Forlindon to guard the Elves passing westward.
ENDTEXT
CREATEUNIT
unit=Rangers
count=6
owner=Elves
veteran=yes
homecity=NONE
Randomize
locations
48,44
49,41
50,42
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Grey Havens
attacker=anybody
defender=Elves
@THEN
TEXT
The magnificent Grey Havens have been conquered! No more chance for the elves to flee west! If the remaining ships do not reclaim it soon, their fate will be gruesome.
ENDTEXT
CREATEUNIT
unit=Galley
count=6
owner=Elves
veteran=yes
homecity=NONE
Randomize
locations
48,46
47,47
46,48
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Grey Havens
attacker=anybody
defender=Elves
@THEN
FLAG
continuous
flag=8
Who=Elves
state=on
@ENDIF

@IF
CITYTAKEN
city=Grey Havens
attacker=Elves
defender=anybody
@THEN
FLAG
continuous
flag=8
Who=Elves
state=off
TEXT
With great effort the Elves have liberated the Gray Havens!
ENDTEXT
@ENDIF

@IF
CITYTAKEN
city=Isengard
attacker=anybody
defender=Isengard
@THEN
TEXT
Saruman has achieved the impossible and summoned a legion of elves from the very Aman to come and fight for him!
ENDTEXT
CREATEUNIT
unit=Forces of Aman
owner=Isengard
veteran=no
homecity=NONE
Randomize
locations
66,98
64,94
62,90
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Lefnui
attacker=anybody
defender=anybody
@THEN
TEXT
After the fall of Lefnui, Gondorian war refugees flee north in hopes to set up a new colony somewhere safe...
ENDTEXT
CREATEUNIT
unit=Settlers
count=3
owner=Gondor
veteran=yes
homecity=NONE
Randomize
locations
58,86
57,81
59,75
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Minas Tirith
attacker=anybody
defender=Gondor
@THEN
TEXT
The White City of Minas Tirith has fallen! Survivors take refuge in Ered Nimrais and form a band of mercenaries.
ENDTEXT
CREATEUNIT
unit=Rangers
count=8
owner=Gondor
veteran=yes
homecity=NONE
Randomize
locations
93,117
94,120
92,122
91,121
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Minas Tirith
attacker=anybody
defender=Gondor
@THEN
FLAG
continuous
flag=3
Who=Gondor
state=on
@ENDIF

@IF
CITYTAKEN
city=Minas Tirith
attacker=Gondor
defender=anybody
@THEN
FLAG
continuous
flag=3
Who=Gondor
state=off
@ENDIF

@IF
CITYTAKEN
city=Dol Amroth
attacker=anybody
defender=Gondor
@THEN
TEXT
Rumours of Boromir's death seem to be exaggerated... At least someone who has the Horn of Gondor and claims to be the elder son of Denethor has been seen in the western regions!
ENDTEXT
CREATEUNIT
unit=Boromir
owner=Gondor
veteran=no
homecity=NONE
Randomize
locations
74,120
72,122
68,122
65,125
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Edoras
attacker=anybody
defender=Gondor
@THEN
TEXT
The residence of the King of Rohan has been sacked and the great Feast Hall of Edoras burnt down! Eoreds ride south seeking refuge and help from their allies in Gondor.
ENDTEXT
CREATEUNIT
unit=Eored
count=12
owner=Gondor
veteran=yes
homecity=NONE
Randomize
locations
78,108
79,111
78,112
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Edoras
attacker=anybody
defender=Gondor
@THEN
FLAG
continuous
flag=5
Who=Gondor
state=on
@ENDIF

@IF
CITYTAKEN
city=Edoras
attacker=Gondor
defender=anybody
@THEN
FLAG
continuous
flag=5
Who=Gondor
state=off
TEXT
The riders of Rohan have liberated Edoras! The Feast Hall shall be their King's residence again.
ENDTEXT
@ENDIF

@IF
CITYTAKEN
city=Rivendell
attacker=anybody
defender=Free People
@THEN
TEXT
Rivendell has been conquered! The Last Homely House stands no longer. Surviving elves retreat to the Grey Havens.
ENDTEXT
CREATEUNIT
unit=High Elves
count=8
owner=Free People
veteran=yes
homecity=NONE
Randomize
locations
53,45
54,42
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Rivendell
attacker=anybody
defender=Free People
@THEN
FLAG
continuous
flag=2
Who=Free People
state=on
@ENDIF

@IF
CITYTAKEN
city=Rivendell
attacker=Free People
defender=anybody
@THEN
FLAG
continuous
flag=2
Who=Free People
state=off
TEXT
Rivendell has been recaptured by the Free People!
ENDTEXT
@ENDIF

@IF
CITYTAKEN
city=Hobbiton
attacker=anybody
defender=Free People
@THEN
FLAG
continuous
flag=5
Who=Free People
state=on
@ENDIF

@IF
CITYTAKEN
city=Hobbiton
attacker=Free People
defender=anybody
@THEN
FLAG
continuous
flag=5
Who=Free People
state=off
TEXT
Hobbits with their allies have successfully reclaimed Hobbiton!
ENDTEXT
@ENDIF

@IF
CITYTAKEN
city=Dale
attacker=anybody
defender=Free People
@THEN
delay
delay=6
TEXT
The dwarves have lost the Lonely Mountain, but they have not lost the war! In the Deep Halls have they forged a dreadful weapon of revenge. Behold the mighty Grond!
ENDTEXT
CREATEUNIT
unit=The Grond
owner=Free People
veteran=no
homecity=NONE
Randomize
locations
112,34
48,54
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Fangorn
attacker=anybody
defender=Free People
@THEN
TEXT
The ancient Ents in the Fangorn forest have lost their battle. Reinforcements from the borders hurry as fast as Ents can, but still arrive too late...
ENDTEXT
CREATEUNIT
unit=Ents
count=12
owner=Free People
veteran=yes
homecity=NONE
Randomize
locations
133,65
134,68
134,66
132,66
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Hobbiton
attacker=anybody
defender=Free People
@THEN
delay
delay=5
TEXT
The undisciplined hobbit slaves are refusing to work and organise an armed rebellion!  
ENDTEXT
CREATEUNIT
unit=Hobbits
count=25
owner=Free People
veteran=no
homecity=NONE
Randomize
locations
57,53
55,47
58,46
61,47
64,52
62,54
56,50
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Umbar
attacker=anybody
defender=Swarthy men
@THEN
TEXT
Our legendary Haven of Umbar has fallen to cowardly landlubbers! Now let them see the power of our dark magic! Giant spiders have answered to our call and will drive off the conquerors!
ENDTEXT
CREATEUNIT
unit=Great Spider
owner=Swarthy men
veteran=yes
homecity=NONE
Randomize
locations
84,172
82,172
86,168
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Rhun
attacker=anybody
defender=Swarthy men
@THEN
TEXT
Our prosperous Rhun has fallen, but the war is not lost yet! The reckless invaders have awakened an ancient balrog who is willing to help us fight against them!
ENDTEXT
CREATEUNIT
unit=Balrog
owner=Swarthy men
veteran=no
homecity=NONE
Randomize
locations
120,84,1
119,87,1
118,86,1
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Gundabad
attacker=anybody
defender=Chaos
@THEN
TEXT
Gundabad has been cleansed from the evil taint of former servants of Morgoth! But not without cost... The spirits of two powerful ancient kings are released and manage to escape...
ENDTEXT
CREATEUNIT
unit=Witch King
owner=Chaos
veteran=yes
homecity=NONE
Randomize
locations
92,16
75,9
108,16
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Gundabad
attacker=anybody
defender=Chaos
@THEN
CREATEUNIT
unit=Aragorn
owner=Chaos
veteran=yes
homecity=NONE
Randomize
locations
104,10
91,3
73,5
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Isengard
attacker=anybody
defender=anybody
@THEN
TEXT
Isengard has fallen! The Elves have recovered the ancient manuscripts that Saruman had hidden in the Orthanc Tower. Now they can learn how to free their Three Rings of Power from the superiority of the One.
ENDTEXT
CREATEUNIT
unit=High Elves
count=50
owner=Elves
veteran=yes
homecity=NONE
Randomize
locations
48,44
86,74
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Isengard
attacker=anybody
defender=anybody
@THEN
CREATEUNIT
unit=White Ship
count=3
owner=Elves
veteran=yes
homecity=NONE
Randomize
locations
48,46
47,47
46,48
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Bree
attacker=anybody
defender=anybody
@THEN
TEXT
The village of Bree has fallen! One of the refugees tells that Barrow Wights have been awakened by the former servants of Morgoth. They must be chasing the wizard who, according to old Cardolan texts, wanted to stop the Witch King of Angmar by creating the Curse of Barrow Downs.
ENDTEXT
CREATEUNIT
unit=The Undead
count=20
owner=Chaos
veteran=yes
homecity=NONE
Randomize
locations
66,56
65,55
67,53
69,53
67,51
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Khand
attacker=anybody
defender=anybody
@THEN
TEXT
The former servants of Morgoth have captured Atastir the Blue Wizard and made him their ally! 
ENDTEXT
CREATEUNIT
unit=Wizard
owner=Chaos
veteran=yes
homecity=NONE
locations
128,146
endlocations
JUSTONCE
@ENDIF

; QUESTS

@IF
UNITKILLED
unit=Trolls
attacker=anybody
defender=Mordor
@THEN
TEXT
^^-=THE QUEST 1 of 3=-
^
Sauron has not forgotten the arrogant refusal of the Iron Hills dwarves to accept his proposal of alliance and has placed a large bounty on the head of their stubborn King Dain II Ironfoot.
^
********
^
Now we have the perfect opportunity to earn great treasure and prove our loyalty to Lord Sauron at the same time! We must quickly send our forces north to the Iron Hills and assassinate Dain II before the northern dragons arrive to do the same. 
ENDTEXT
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Dain II
attacker=Swarthy men
defender=Free People
@THEN
TEXT
^^-=THE QUEST 2 of 3=-
^
We have successfully removed Dain II from the throne of the Iron Hills and Sauron has honestly paid us the reward! But now the former servants of Morgoth are jealous and a horrible sea monster has appeared in Belegaer.
^
********
^
We need to send out a large fleet and hunt the monster down or it will come to sink our ships and attack our coastal cities.
ENDTEXT
FLAG
continuous
flag=1
Who=Swarthy men
state=on
CREATEUNIT
unit=Watcher
owner=Chaos
veteran=yes
homecity=NONE
locations
18,80
endlocations
CHANGEMONEY
receiver=Swarthy men
amount=2000
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Swarthy men
flag=1
state=on
@AND
UNITKILLED
unit=Watcher
attacker=Swarthy men
defender=Chaos
@THEN
TEXT
^^-=THE QUEST 3 of 3=-
^
Brave Corsairs from Umbar have slain the Sea Monster! From its stomach several ancient valuables are found and one inscribed golden plate tells about the fate of two magical swords that were forged by Feanor and ended up in Carn Dum.
^
********
^
The swords could still be there. We should send out a search party, "liberate" Carn Dum and search the city thorouhly. 
ENDTEXT
FLAG
continuous
flag=2
Who=Swarthy men
state=on
CHANGEMONEY
receiver=Swarthy men
amount=1000
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Swarthy men
flag=2
state=on
@AND
CITYTAKEN
city=Carn Dum
attacker=Swarthy men
defender=anybody
@THEN
TEXT
^^-=THE QUEST COMPLETE=-
^
We have captured Carn Dum and recovered the two famous swords, enchanted with powerful Noldo magic! The two Blue Wizards arrive to claim them.
ENDTEXT
JUSTONCE
@ENDIF

;REVISE

@IF
CITYTAKEN
city=Carn Dum
attacker=Swarthy men
defender=anybody
@THEN
TEXT
Pallando the Blue Wizard has appeared in the south in disguise and seized the throne of Harad.
ENDTEXT
CREATEUNIT
unit=Wizard
owner=Swarthy men
veteran=no
homecity=NONE
locations
96,160
endlocations
JUSTONCE
@ENDIF

@IF
CITYTAKEN
city=Carn Dum
attacker=Swarthy men
defender=anybody
@THEN
FLAG
continuous
flag=9
Who=Mordor
state=on
TEXT
Atastir the Blue Wizard has appeared in the east in disguise and seized the throne of Rhun.
ENDTEXT
CREATEUNIT
unit=Wizard
owner=Swarthy men
veteran=no
homecity=NONE
locations
124,84
endlocations
JUSTONCE
@ENDIF

; HEROES

@IF
UNITKILLED
unit=Uruk Orcs
attacker=anybody
defender=Mordor
@THEN
TEXT
We have answered to Sauron's request to send three legions of Haradrim under his command.
ENDTEXT
CREATEUNIT
unit=Haradrim
count=3
owner=Mordor
veteran=yes
homecity=NONE
locations
112,116
endlocations
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Balrog
attacker=anybody
defender=Mordor
@THEN
TEXT
The Elves have discovered an ancient complex of caves beneath the Mines of Moria that may hide secrets about how to free their Three Rings of Power from the influence of the One. They are preparing to send an army into the ancient tunnels...
ENDTEXT
CREATEUNIT
unit=High Elves
count=12
owner=Elves
veteran=yes
homecity=NONE
Randomize
locations
67,23,3
65,17,3
69,19,3
62,20,3
80,62,3
84,64,3
endlocations
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Saruman
attacker=anybody
defender=Isengard
@THEN
FLAG
continuous
flag=6
Who=Isengard
state=on
TEXT
The mighty Saruman has been forced to retreat! Ashamed and humiliated by the defeat he retreats into the safety of Orthanc Tower.
ENDTEXT
CREATEUNIT
unit=Saruman
owner=Isengard
veteran=no
homecity=NONE
locations
76,92
66,88
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Isengard
flag=6
state=on
@AND
UNITKILLED
unit=Saruman
attacker=anybody
defender=Isengard
@THEN
TEXT
After losing yet another battle, Saruman has disappeared without leaving any clue as to where... The commander of Isengard  takes charge over the remnants of his army. 
ENDTEXT
CREATEUNIT
unit=Warlord
owner=Isengard
veteran=yes
homecity=NONE
locations
76,92
70,90
73,77
endlocations
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Galadriel
attacker=anybody
defender=Elves
@THEN
TEXT
Galadriel, the radiant Lady of Light has met a power stronger than her own. Weary of fight and sick by grief, Celeborn leaves Lorien. 
ENDTEXT
CREATEUNIT
unit=High Elves
owner=Elves
veteran=yes
homecity=Lorien
locations
86,74
94,60
endlocations
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Eowyn
attacker=anybody
defender=Gondor
@THEN
FLAG
continuous
flag=8
Who=Gondor
state=on
TEXT
Eowyn the valiant Shieldmaid of Rohan has fallen fighting against a much stronger enemy! She is left on the battlefield for dead, but when the fog clears and the Knights of Gondor return for the wounded, they find her still breathing. She is brought to the healing house of the closest city.
ENDTEXT
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Eowyn
attacker=anybody
defender=Gondor
@THEN
delay
delay=4
TEXT
As soon as brave Eowyn has recovered from her wounds, she saddles her horse again and rides out to battle despite all warnings and efforts to keep her safely within the city walls.
ENDTEXT
CREATEUNIT
unit=Eowyn
owner=Gondor
veteran=no
homecity=none
locations
95,119
88,112
74,124
72,116
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Gondor
flag=8
state=on
@AND
UNITKILLED
unit=Eowyn
attacker=anybody
defender=Gondor
@THEN
TEXT
Regardless all her strength and skill, the stalwart Eowyn has fallen fighting against an overwhelming enemy! Gondor and Rohan grieve for her death.
ENDTEXT
@ENDIF

@IF
UNITKILLED
unit=Eomer
attacker=anybody
defender=Gondor
@THEN
FLAG
continuous
flag=9
Who=Gondor
state=on
TEXT
Courageous Eomer of Rohan has been seriously wounded in the battle for Gondor and returns to his homeland to heal.
ENDTEXT
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Eomer
attacker=anybody
defender=Gondor
@THEN
delay
delay=4
TEXT
Eomer has been healed and returns to the south to fight! 
ENDTEXT
CREATEUNIT
unit=Eomer
owner=Gondor
veteran=no
homecity=none
locations
95,119
86,122
75,115
74,120
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Gondor
flag=9
state=on
@AND
UNITKILLED
unit=Eomer
attacker=anybody
defender=Gondor
@THEN
TEXT
Commander Eomer has fallen in battle! Rohan has lost their only remaining heir to the throne.
ENDTEXT
@ENDIF

@IF
UNITKILLED
unit=Witch King
attacker=Anybody
defender=Mordor
@THEN
FLAG
continuous
flag=12
Who=Mordor
state=on
TEXT
The Black Captain of the Nazgul, the fearsome Witch King of Angmar has been injured and forced to retreat to his Master.
ENDTEXT
CREATEUNIT
unit=Witch King
owner=Mordor
veteran=no
homecity=Barad-dur
locations
112,110
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=12
state=on
@AND
UNITKILLED
unit=Witch King
attacker=anybody
defender=Mordor
@THEN
TEXT
The mighty Witch King has been killed in battle. The Lieutenant of the Tower assumes his former position as the commander of Sauron's armies. 
ENDTEXT
CREATEUNIT
unit=Warlord
owner=Mordor
veteran=yes
homecity=NONE
locations
112,110
endlocations
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Warlord
attacker=anybody
defender=Mordor
@THEN
TEXT
The Lieutenant of the Black Tower suffers the same fate as the Witch King did before him. He is slain and his horse stolen.
ENDTEXT
CHANGEMONEY
receiver=Mordor
amount=-1000
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Dark Rider
attacker=Anybody
defender=Mordor
@THEN
delay
delay=3
TEXT
A defeated Ringwraith has returned to Barad-dur.
ENDTEXT
CREATEUNIT
unit=Nazgul
owner=Mordor
veteran=no
homecity=Barad-dur
locations
112,110
endlocations
@ENDIF

@IF
UNITKILLED
unit=Dark Rider
attacker=Anybody
defender=Mordor
@THEN
FLAG
continuous
flag=5
Who=Mordor
state=on
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=5
state=on
@AND
UNITKILLED
unit=Dark Rider
attacker=Anybody
defender=Mordor
@THEN
FLAG
continuous
flag=6
Who=Mordor
state=on
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=6
state=on
@AND
UNITKILLED
unit=Dark Rider
attacker=Anybody
defender=Mordor
@THEN
FLAG
continuous
flag=7
Who=Mordor
state=on
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Nazgul
attacker=anybody
defender=anybody
@THEN
TEXT
One of Sauron's undefeatable flying Nazguls has been destroyed with magic. It is no more possible to make him return to the world.
ENDTEXT
@ENDIF

@IF
CHECKFLAG
Who=Gondor
flag=0
state=off
@AND
UNITKILLED
unit=Aragorn
attacker=anybody
defender=Free People
@THEN
delay
delay=4
TEXT
Aragorn has arrived in Gondor to resist our conquest! 
ENDTEXT
CREATEUNIT
unit=Aragorn
owner=Gondor
veteran=yes
homecity=NONE
locations
82,104
77,101
95,119
80,130
65,117
endlocations
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Aragorn
attacker=anybody
defender=Free People
@THEN
delay
delay=6
TEXT
Aragorn has summoned the Dead Men of Dunharrow to fulfill their oath and fight for Gondor!
ENDTEXT
CREATEUNIT
unit=The Undead
count=16
owner=Gondor
veteran=yes
homecity=none
Randomize
locations
77,111
78,112
79,111
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Gondor
flag=0
state=on
@AND
UNITKILLED
unit=Aragorn
attacker=anybody
defender=Free People
@THEN
delay
delay=3
TEXT
Aragorn has recovered from his wounds and is ready to continue his battle against evil! 
ENDTEXT
CREATEUNIT
unit=Aragorn
owner=Free People
veteran=yes
homecity=NONE
Randomize
locations
81,47
69,61
52,60
endlocations
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Aragorn
attacker=anybody
defender=Gondor
@THEN
TEXT
Aragorn has been badly wounded and is dying! Dunedains are at a loss, thinking that Gondor will never see a King of Elros's blood. Sauron takes the chance to convince some of them that he would be much better ally to Arnor than the bastard who is going to claim the throne of Gondor. 
ENDTEXT
CREATEUNIT
unit=Dunedain
count=2
owner=Mordor
veteran=yes
homecity=none
locations
100,132
110,132
112,110
endlocations
CHANGEMONEY
receiver=Gondor
amount=2000
@ENDIF

@IF
UNITKILLED
unit=Great Gate
attacker=anybody
defender=Gondor
@THEN
TEXT
The Great Gate of Minas Tirith has been breached! 
ENDTEXT
CREATEUNIT
unit=Eored
count=16
owner=Gondor
veteran=yes
homecity=none
Randomize
locations
96,116
95,117
95,119
95,115
endlocations
@ENDIF

@IF
UNITKILLED
unit=King
attacker=anybody
defender=Gondor
@THEN
TEXT
King Aragorn Elessar has met a gruesome death in battle. With his head severed from the shoulders his body falls into the mud and horses trample across it. Ravens have his remains and orcs loot his corpse. Such is the final end of the king of Gondor. 
ENDTEXT
CHANGEMONEY
receiver=Gondor
amount=-2000
@ENDIF

@IF
CHECKFLAG
Who=Gondor
flag=0
state=off
@AND
UNITKILLED
unit=Gandalf the Grey
attacker=anybody
defender=Free People
@THEN
TEXT
The Wise Gandalf the Grey has been killed! His spirit travels to the West, but only to return shortly with a new body, purified and stronger than ever before. As always, he appears where he is needed most and expected the least... 
ENDTEXT
CREATEUNIT
unit=Gandalf the White
owner=Gondor
veteran=yes
homecity=none
locations
86,88
82,104
95,119
83,133
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Gondor
flag=0
state=on
@AND
UNITKILLED
unit=Gandalf the Grey
attacker=anybody
defender=Free People
@THEN
TEXT
The Wise Gandalf the Grey has been killed! His spirit travels to the West, but only to return shortly with a new body, purified and stronger than ever before. As always, he appears where he is needed most and expected the least... 
ENDTEXT
CREATEUNIT
unit=Gandalf the White
owner=Free People
veteran=yes
homecity=none
Randomize
locations
81,47
59,53
53,61
endlocations
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Gandalf the White
attacker=anybody
defender=anybody
@THEN
TEXT
The invincible Gandalf the White and his trusted friend Shadowfax have been killed. The Istar's spirit travels West, never to return before the world is mended. When the Great King Manwe learns of the gruesome fate of Middle-Earth, he decides to take action...
ENDTEXT
CREATEUNIT
unit=Forces of Aman
owner=TriggerDefender
Count=6
veteran=yes
homecity=none
randomize
locations
54,74
53,79
56,84
52,72
endlocations
MAKEAGGRESSION
who=Isengard
whom=Mordor
@ENDIF

@IF
UNITKILLED
unit=Gandalf the White
attacker=anybody
defender=Gondor
@THEN
FLAG
continuous
flag=7
Who=Gondor
state=on
@ENDIF

@IF
UNITKILLED
unit=Dain II
attacker=anybody
defender=Free People
@THEN
TEXT
The arrogant Dain II is dead, yet the remaining dwarves are rallying their armies for counterattack.
ENDTEXT
CREATEUNIT
unit=Dwarves
owner=Free People
Count=7
veteran=yes
homecity=none
locations
47,55
51,55
50,60
endlocations
@ENDIF

@IF
UNITKILLED
unit=Cirdan
attacker=anybody
defender=Elves
@THEN
TEXT
Cirdan the Shipwright, the eldest of Eldar and the Captain of White Ships has been defeated in battle and forced to leave Middle-Earth! One of his cunning harbourmasters gathers the leaderless Elves under his banner, but the Havens will never be the same again...
ENDTEXT
CREATEUNIT
unit=Wormtongue
owner=Elves
veteran=yes
homecity=none
locations
86,74
94,60
98,40
endlocations
@ENDIF

@IF
UNITKILLED
unit=Cirdan
attacker=anybody
defender=Elves
@THEN
CREATEUNIT
unit=Rangers
count=7
owner=Elves
veteran=yes
homecity=none
randomize
locations
95,53
85,73
95,35
42,40
endlocations
@ENDIF

@IF
UNITKILLED
unit=King
attacker=anybody
defender=Swarthy men
@THEN
TEXT
Our Great King of Harad and Rhun has fallen in battle against overwhelming enemy!
ENDTEXT
@ENDIF

@IF
UNITKILLED
unit=Wizard
attacker=anybody
defender=Elves
@THEN
TEXT
The nature-loving wizard Radagast the Brown has been killed! He can help Middle-Earth no more, but the Great Eagles near Mirkwood flock together to continue his fight against evil.
ENDTEXT
CREATEUNIT
unit=Great Eagle
count=6
owner=Elves
veteran=yes
homecity=NONE
locations
86,74
97,57
endlocations
@ENDIF

@IF
UNITKILLED
unit=Legolas
attacker=anybody
defender=Gondor
@THEN
TEXT
Fellowship member Legolas is badly wounded and cannot continue on the quest. He returns to his home in Thranduil.
ENDTEXT
CREATEUNIT
unit=Legolas
owner=Elves
veteran=no
homecity=NONE
locations
48,44
43,41
endlocations
@ENDIF

@IF
UNITKILLED
unit=Legolas
attacker=anybody
defender=Elves
@THEN
TEXT
Legolas Greenleaf, the son of king Thranduil and celebrated hero of the Elves has met his doom! Overwhelmed by a much stronger enemy he had no chance to survive. His soul travels to the West and from the Halls of Mandos he manages to convince Manwe the Great King of the Valar to send help to the elves of Middle-Earth...
ENDTEXT
CREATEUNIT
unit=Forces of Aman
owner=Elves
veteran=yes
homecity=none
locations
48,50
endlocations
@ENDIF

@IF
UNITKILLED
unit=Gimli
attacker=anybody
defender=Free People
@THEN
delay
delay=4
TEXT
In return for saving his life, Gimli the son of Gloin joins the Knights of Gondor to fight against evil! 
ENDTEXT
CREATEUNIT
unit=Gimli
owner=Gondor
veteran=yes
homecity=NONE
locations
95,119
83,121
66,114
endlocations
@ENDIF

@IF
CHECKFLAG
Who=Gondor
flag=0
state=off
@AND
UNITKILLED
unit=Legolas
attacker=anybody
defender=Free People
@THEN
delay
delay=3
TEXT
Legolas has been healed! To reward his rescuers he promises to fight for Gondor! 
ENDTEXT
CREATEUNIT
unit=Legolas
owner=Gondor
veteran=yes
homecity=NONE
locations
95,119
83,121
66,114
endlocations
@ENDIF

@IF
CHECKFLAG
Who=Gondor
flag=0
state=on
@AND
UNITKILLED
unit=Legolas
attacker=anybody
defender=Free People
@THEN
delay
delay=3
TEXT
Legolas has been healed! He is ready to fight again. 
ENDTEXT
CREATEUNIT
unit=Legolas
owner=Elves
veteran=yes
homecity=NONE
Randomize
locations
86,74
86,86
97,39
endlocations
@ENDIF

@IF
UNITKILLED
unit=Pippin
attacker=anybody
defender=Free People
@THEN
delay
delay=6
TEXT
The brave hobbit Pippin finds his way to Gondor where he is promoted to knighthood!  
ENDTEXT
CREATEUNIT
unit=Pippin
owner=Gondor
veteran=yes
homecity=NONE
locations
95,119
82,110
65,117
endlocations
@ENDIF

@IF
UNITKILLED
unit=Merry
attacker=anybody
defender=Free People
@THEN
delay
delay=8
TEXT
The adventurous hobbit Merry finds his way to Rohan and swears fealty to the King! 
ENDTEXT
CREATEUNIT
unit=Merry
owner=Gondor
veteran=yes
homecity=NONE
locations
95,119
80,130
79,103
endlocations
@ENDIF

@IF
UNITKILLED
unit=Boromir
attacker=anybody
defender=Free People
@THEN
TEXT
Fellowship member Boromir has been mortally wounded and is left on the battlefield for dead. The Horn of Gondor is shattered to pieces.
ENDTEXT
CHANGEMONEY
receiver=Gondor
amount=-1000
@ENDIF

@IF
CHECKFLAG
Who=Isengard
flag=0
state=on
@AND
UNITKILLED
unit=Boromir
attacker=anybody
defender=Free People
@THEN
TEXT
Saruman has found the body of Boromir and resurrects him with the power of the One Ring!
ENDTEXT
CREATEUNIT
unit=Boromir
owner=Isengard
veteran=yes
homecity=none
randomize
locations
76,92
73,89
endlocations
@ENDIF

@IF
UNITKILLED
unit=Faramir
attacker=anybody
defender=Gondor
@THEN
TEXT
Courageous Faramir, a hero both brave and wise has met a horrible end in the hands of evil! All Gondor is grieving and Sauron sees it as the best time to bring the fearsome Grond to the gates of Minas Tirith for a little surprise attack!
ENDTEXT
CREATEUNIT
unit=The Grond
owner=Mordor
veteran=yes
homecity=NONE
locations
102,118
105,117
112,110
endlocations
@ENDIF

@IF
UNITKILLED
unit=Pippin
attacker=anybody
defender=Gondor
@THEN
TEXT
The brave young Hobbit Peregrin Took has fallen fighting for the glory of Gondor!
ENDTEXT
CHANGEMONEY
receiver=Mordor
amount=500
@ENDIF

@IF
UNITKILLED
unit=Merry
attacker=anybody
defender=Gondor
@THEN
TEXT
The brave young Hobbit Meriadoc Brandybuck has fallen fighting for the glory of Rohan!
ENDTEXT
CHANGEMONEY
receiver=Swarthy men
amount=500
@ENDIF

@IF
UNITKILLED
unit=Warlord
attacker=anybody
defender=Swarthy men
@THEN
TEXT
One of our Warlords has been killed in battle! Enemies have looted the treasure he carried to support his troops. One of our younger commanders is showing great talent at winning battles and is promoted to the position of Commander-in-Chief.
ENDTEXT
CREATEUNIT
unit=Warlord
owner=Swarthy men
veteran=yes
homecity=none
locations
121,77
124,84
98,168
116,166
endlocations
CHANGEMONEY
receiver=Swarthy men
amount=-100
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Gwaihir
attacker=anybody
defender=anybody
@THEN
TEXT
The oversized eagle Gwaihir has flown his last flight! His fellow eagles fly from the mountains to kill the slayers.
ENDTEXT
CREATEUNIT
unit=Great Eagle
count=8
owner=Free People
veteran=yes
homecity=none
randomize
locations
84,60
81,47
94,48
endlocations
@ENDIF

@IF
UNITKILLED
unit=Gwaihir
attacker=anybody
defender=Free People
@THEN
TEXT
Learning of the sad death of Gwaihir, Radagast the Brown travels to Lorien to help to protect the Golden Wood. 
ENDTEXT
CREATEUNIT
unit=Wizard
owner=Elves
veteran=yes
homecity=none
locations
86,74
endlocations
@ENDIF

@IF
UNITKILLED
unit=Tom Bombadil
attacker=anybody
defender=Free People
@THEN
TEXT
Tom Bombadil has disappeared. Some say he has gone West, others claim to have heard his songs echoing in the springs and wind and trees. Whatever the truth is, his house in the Old Forest remains empty...
ENDTEXT
CHANGEMONEY
receiver=Free People
amount=-1000
@ENDIF

@IF
UNITKILLED
unit=Treebeard
attacker=anybody
defender=anybody
@THEN
TEXT
The fight has gone badly for Treebeard. The servants of evil chop him to pieces and burn them. Saruman takes his chances to convince the ents of Fangorn to follow him as their new glorious leader.
ENDTEXT
CREATEUNIT
unit=Ents
owner=Isengard
Count=2
veteran=yes
homecity=Isengard
locations
79,89
81,91
76,92
endlocations
@ENDIF

@IF
UNITKILLED
unit=Balrog
attacker=anybody
defender=Mordor
@THEN
TEXT
Rumors say that Durin's Bane has been defeated. It is bad for the morale. Inspired by tales of heroes and knowing those beasts can be slain, many young dwarves take the sword to fight openly against Lord Sauron. 
ENDTEXT
CREATEUNIT
unit=Dwarves
owner=Free People
Count=14
veteran=yes
homecity=none
locations
77,73,0
81,75,1
79,75,1
endlocations
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Dragon
attacker=anybody
defender=Chaos
@THEN
TEXT
A huge Dragon has been slain by a brave hero! The generous Dragonslayer offers part of the loot to his nation.
ENDTEXT
CHANGEMONEY
receiver=TriggerAttacker
amount=1000
@ENDIF

@IF
UNITKILLED
unit=Elrond
attacker=anybody
defender=Free People
@THEN
TEXT
Elrond the Halfelven, one of the few survivors from the First Age has been brutally forced to leave the land of Middle-Earth he loved so much. Rivendell Elves flee to the Grey Havens.
ENDTEXT
CREATEUNIT
unit=High Elves
Count=15
owner=Elves
veteran=yes
homecity=none
locations
48,44
42,42
endlocations
@ENDIF

@IF
UNITKILLED
unit=Wormtongue
attacker=anybody
defender=Isengard
@THEN
TEXT
Wormtongue has failed and was killed. The King of Rohan is out of Sarumans grasp.
ENDTEXT
CREATEUNIT
unit=Eored
Count=25
owner=Gondor
veteran=yes
homecity=none
locations
82,104
80,104
endlocations
@ENDIF

@IF
UNITKILLED
unit=Sauron
attacker=anybody
defender=Mordor
@THEN
FLAG
continuous
flag=10
Who=Mordor
state=off
TEXT
Lord Sauron, the most powerful being on the whole Middle-Earth has lost his life in battle! Our allies in Mordor have been weakened greatly by that loss and we should no longer count on their support.
ENDTEXT
@ENDIF

@IF
UNITKILLED
unit=Theoden
attacker=anybody
defender=Gondor
@THEN
TEXT
Theoden the King of Rohan has been defeated in battle and dies under the weight of his mount upon him. News arrive in Gondor from Lower-Anduin where a huge fleet of Umbar dromons, black as the darkest night, have been seen sailing upriver... We hope they learn the truth as late as possible. For those are the ships that we lost to Aragorn and the Undead of Dunharrow... 
ENDTEXT
CREATEUNIT
unit=Dromon
count=8
owner=Gondor
veteran=yes
homecity=none
randomize
locations
98,126
98,124
99,123
96,124
endlocations
@ENDIF

@IF
UNITKILLED
unit=Gandalf the Grey
attacker=anybody
defender=Free People
@THEN
delay
delay=1
TEXT
After the unfortunate death of Gandalf the glorious King Theoden of Rohan rides out to battle!
ENDTEXT
CREATEUNIT
unit=Theoden
owner=Gondor
veteran=yes
homecity=none
locations
82,104
77,101
95,119
67,109
endlocations
@ENDIF

@IF
UNITKILLED
unit=Shelob
attacker=anybody
defender=Mordor
@THEN
TEXT
Shelob has been slain! Someone must have discovered her secret lair. Sauron has summoned some giant spiders to investigate the situation in Cirith Ungol.
ENDTEXT
CREATEUNIT
unit=Spiders
count=3
owner=Mordor
veteran=yes
homecity=NONE
locations
114,116
111,107
115,109
endlocations
JUSTONCE
@ENDIF

@IF
UNITKILLED
unit=Rangers
attacker=anybody
defender=Free People
@THEN
CREATEUNIT
unit=Rangers
count=3
owner=Free People
veteran=no
homecity=none
randomize
locations
61,69
72,54
endlocations
JUSTONCE
@ENDIF

@IF
Checkflag
Who=Free People
Mask=0b00000000000000000000000010100100
Count=3
State=On
@AND
CHECKFLAG
Who=Mordor
flag=4
state=off
@THEN
TEXT
Unable to watch the carnage any longer the Great Manwe of the Valar seeks Iluvatar's consent and sends his legions to help the Free People!
ENDTEXT
FLAG
continuous
flag=4
Who=Mordor
state=on
CREATEUNIT
unit=Forces of Aman
Count=40
owner=Free People
veteran=yes
homecity=none
randomize
locations
61,101
60,98
60,90
61,95
63,99
65,99
endlocations
JUSTONCE
@ENDIF

@IF
Checkflag
Who=Gondor
Mask=0b00000000000000000000000010101000
Count=3
State=On
@AND
CHECKFLAG
Who=Mordor
flag=4
state=off
@THEN
TEXT
Unable to watch the carnage any longer the great Manwe, king of Valar seeks Iluvatar's consent and sends his legions to save the human states of Gondor and Rohan!
ENDTEXT
FLAG
continuous
flag=4
Who=Mordor
state=on
CREATEUNIT
unit=Forces of Aman
Count=40
owner=Gondor
veteran=yes
homecity=none
randomize
locations
60,108
61,121
60,122
60,124
61,125
endlocations
JUSTONCE
@ENDIF

@IF
Checkflag
Who=Elves
Mask=0b00000000000000000000000101000000
Count=2
State=On
@AND
CHECKFLAG
Who=Mordor
flag=4
state=off
@THEN
TEXT
Unable to watch the carnage any longer the great Manwe, king of Valar seeks Iluvatar's consent and sends his legions to help the Elves of Middle-Earth!
ENDTEXT
FLAG
continuous
flag=4
Who=Mordor
state=on
CREATEUNIT
unit=Forces of Aman
Count=40
owner=Elves
veteran=yes
homecity=none
randomize
locations
52,72
54,74
54,76
54,78
57,79
endlocations
JUSTONCE
@ENDIF

; UNITS

@IF
CHECKFLAG
Who=Mordor
flag=6
state=on
@THEN
TEXT
The treacherous Saruman has gathered a huge army of Uruk-Hai, orcs, wolves and wild men in Isengard and launches a surprise attack upon his closest enemy!
ENDTEXT
CREATEUNIT
unit=Uruk Orcs
count=10
owner=Isengard
veteran=yes
homecity=none
randomize
locations
76,92
77,93
76,94
74,92
endlocations
JUSTONCE
MAKEAGGRESSION
who=Isengard
whom=Gondor
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=6
state=on
@THEN
CREATEUNIT
unit=Trolls
count=4
owner=Isengard
veteran=yes
homecity=none
randomize
locations
76,92
77,93
76,94
74,92
endlocations
JUSTONCE
MAKEAGGRESSION
who=Isengard
whom=Free People
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=6
state=on
@THEN
CREATEUNIT
unit=Uruk-Hai
count=8
owner=Isengard
veteran=yes
homecity=none
randomize
locations
76,92
77,93
76,94
74,92
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=6
state=on
@THEN
CREATEUNIT
unit=Wolves
count=6
owner=Isengard
veteran=yes
homecity=none
randomize
locations
76,92
77,93
76,94
74,92
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=6
state=on
@THEN
CREATEUNIT
unit=Warg Riders
count=5
owner=Isengard
veteran=yes
homecity=none
randomize
locations
76,92
77,93
76,94
74,92
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=6
state=on
@THEN
CREATEUNIT
unit=Wild Men
count=7
owner=Isengard
veteran=yes
homecity=none
randomize
locations
76,92
77,93
76,94
74,92
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=7
state=on
@THEN
TEXT
Sauron's powerful battering ram, the Grond, is being moved towards the western cities on the Lord's orders!
ENDTEXT
CREATEUNIT
unit=The Grond
owner=Mordor
veteran=yes
homecity=NONE
locations
102,118
103,117
112,110
endlocations
JUSTONCE
@ENDIF

@IF
CHECKFLAG
Who=anybody
flag=0
state=on
@THEN
CREATEUNIT
unit=Olog-Hai
owner=Chaos
veteran=yes
homecity=none
randomize
locations
84,22
92,16
75,9
108,16
endlocations
@ENDIF

@IF
RANDOMTURN     
denominator=4
@AND
CHECKFLAG
Who=Mordor
flag=10
state=on
@THEN
CREATEUNIT
unit=Great Spider
owner=Chaos
veteran=yes
homecity=none
randomize
locations
122,6,0
71,3,0
100,6,0
105,23,1
endlocations
@ENDIF

@IF
TURN
turn=-1
@THEN
CREATEUNIT
unit=Eored
owner=Gondor
veteran=yes
homecity=NONE
locations
77,101
82,104
95,119
endlocations
@ENDIF

@IF
CHECKFLAG
Who=Gondor
flag=3
state=on
@AND
TURNINTERVAL
interval=3
@THEN
CREATEUNIT
unit=Great Eagle
owner=Gondor
veteran=yes
homecity=NONE
locations
75,115
77,101
80,130
endlocations
@ENDIF

@IF
RANDOMTURN
denominator=30
@THEN
CREATEUNIT
unit=Dunedain
count=10
owner=Gondor
veteran=yes
homecity=NONE
locations
95,119
95,131
80,130
75,115
endlocations
@ENDIF

@IF
RANDOMTURN
denominator=30
@THEN
CREATEUNIT
unit=Eored
count=10
owner=Gondor
veteran=yes
homecity=NONE
locations
82,104
77,101
88,112
95,119
endlocations
@ENDIF

@IF
RANDOMTURN
denominator=4
@THEN
CREATEUNIT
unit=Rangers
owner=Free People
veteran=yes
homecity=NONE
randomize
locations
81,47
58,48
67,51
endlocations
@ENDIF

@IF
CHECKFLAG
Who=Free People
flag=2
state=on
@AND
TURNINTERVAL
interval=3
@THEN
CREATEUNIT
unit=Great Eagle
owner=Free People
veteran=yes
homecity=NONE
locations
84,60
58,48
endlocations
@ENDIF

@IF
RANDOMTURN
denominator=30
@THEN
CREATEUNIT
unit=Dwarves
count=10
owner=Free People
veteran=yes
homecity=NONE
locations
115,33
102,34
endlocations
@ENDIF

@IF
TURN
turn=-1
@THEN
CREATEUNIT
unit=Elven Cavalry
owner=Elves
veteran=yes
homecity=NONE
randomize
locations
86,74
94,56
98,36
endlocations
@ENDIF

@IF
CHECKFLAG
Who=Elves
flag=5
state=on
@AND
TURNINTERVAL
interval=10
@THEN
CREATEUNIT
unit=Great Eagle
owner=Elves
veteran=yes
homecity=NONE
locations
86,74
48,44
endlocations
@ENDIF

@IF
RANDOMTURN
denominator=20
@THEN
CREATEUNIT
unit=Elven Cavalry
count=10
owner=Elves
veteran=yes
homecity=NONE
locations
86,74
94,56
98,36
endlocations
@ENDIF

@IF
RANDOMTURN
denominator=10
@THEN
CREATEUNIT
unit=Dragon
owner=Chaos
veteran=yes
homecity=none
randomize
locations
131,5
107,3
76,2
endlocations
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=7
state=on
@THEN
CREATEUNIT
unit=Uruk Orcs
count=4
owner=Mordor
veteran=yes
homecity=NONE
randomize
locations
97,71
105,99
102,118
112,110
endlocations
@ENDIF

@IF
CHECKFLAG
Who=Mordor
flag=7
state=on
@THEN
CREATEUNIT
unit=Trolls
count=1
owner=Mordor
veteran=yes
homecity=NONE
randomize
locations
97,71
105,99
102,118
112,110
endlocations
@ENDIF

@ENDEVENTS
